{% load staticfiles %}
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tree Hugger SB</title>
    <style type="text/css">
      html, body, #map_canvas {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      body {
        position: relative;
      }
      #map_canvas {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
      }

      #menu_btn {
        position: absolute;
        top: 25px;
        left: 25px;
        height: 32px;
        width: 36px;
      }
    </style>

    <link rel="stylesheet" href="{% static 'bootstrap/dist/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'font-awesome/css/font-awesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'jasny-bootstrap/dist/css/jasny-bootstrap.min.css' %}">


    <script>
      var USERNAME = '{{ user.username }}';
      var API_KEY = '{{ user.api_key.key }}';
    </script>

    <script type="text/javascript" src="{% static 'modernizr/modernizr.js' %}"></script>
    <script type="text/javascript" src="{% static 'jquery/dist/jquery.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'bootstrap/dist/js/bootstrap.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'lodash/lodash.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'backbone/backbone.js' %}"></script>
    <script type="text/javascript" src="{% static 'jasny-bootstrap/dist/js/jasny-bootstrap.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/map.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/backbone-tastypie.js' %}"></script>
    <script src="http://maps.google.com/maps/api/js"></script>
    <script>
      // function initialize() {
      //   var mapOptions = {
      //     center: { lat: 41.6725, lng: -86.2},
      //     zoom: 13
      //   };
      //   var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
      //
      //   // Request current location
      //   navigator.geolocation.getCurrentPosition(function(pos){
      //       map.setCenter({lat: pos.coords.latitude, lng: pos.coords.longitude})
      //       map.setZoom(15)
      //   })
      //
      //   // Load tree data and make markers
      //   d = new XMLHttpRequest()
      //   d.open('GET', '/api/v1/tree/?limit=1000&format=json', true)
      //   d.send()
      //   d.onload = function(){
      //       trees = JSON.parse(d.responseText).objects
      //       trees.forEach(function(tree){
      //           var marker = new google.maps.Marker({position: {lat: tree.latitude, lng: tree.longitude}, map: map})
      //           marker.data = tree
      //           addinfowindow(marker)
      //       })
      //   }
      // }
      // google.maps.event.addDomListener(window, 'load', initialize);
      //
      // // Info Window
      // function addinfowindow(marker){
      //   google.maps.event.addListener(marker, 'click', function(e) {
      //       var infowindow = new google.maps.InfoWindow();
      //       infowindow.open(marker.map, marker)
      //       infoDiv = document.createElement('div')
      //       infowindow.setContent(infoDiv)
      //       marker.data.images.forEach(function(data){
      //           var img = document.createElement('img')
      //           img.src = data.image
      //           img.style.maxWidth = '128px'
      //           img.style.maxHeight = '128px'
      //           img.style.padding = '10px'
      //           infoDiv.appendChild(img)
      //       })
      //   })
      // }
    </script>
  </head>
  <body>
    <nav id="navmenu" class="navmenu navmenu-default navmenu-fixed-left offcanvas" role="navigation">
      <a class="navmenu-brand" href="#">Tree Hugger SB</a>
      <ul class="nav navmenu-nav">
        <li><a href="#">Add a Tree</a></li>
        <li><a href="#">Account</a></li>
        <!-- Button trigger modal -->
        <li><a href="#" class="" data-toggle="modal" data-target="#modal_about">About</a></li>
        <li><a href="/accounts/login">Login</a></li>
        <li><a href="#">Logout</a></li>
      </ul>
    </nav>
    <div id="map_canvas"></div>
    <button id="menu_btn" type="button" data-toggle="offcanvas" data-target="#navmenu" >
      <i class="fa fa-bars fa-lg"></i>
    </button>



    <div id="modal_about" class="modal fade">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">About</h4>
          </div>
          <div class="modal-body">
            <p>Stuff</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <div id="modal_login_signup" class="modal fade" data-backdrop="static" data-keyboard=false>
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button> -->
            <h3 class="modal-title text-center">Welcome!</h3>
          </div>
          <div class="modal-body text-center">
            <div class="btn-group btn-group-justified" role="group" aria-label="...">
              <a href="#" class="btn btn-primary">Sign Up</a>
              <a href="#" class="btn btn-success">Login</a>
            </div>
          </div>
          <!-- <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div> -->
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
  </body>
</html>
